const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/Dashboard-_cuqz3gV.js","assets/index-CXMtpIWm.js","assets/index-CqEk0I2n.css","assets/supabase-DllM73rC.js","assets/EquipmentList-CF53TGYV.js","assets/StatusBadge-LNyQ7shC.js","assets/EquipmentDetail-Ce_4hP5G.js","assets/EquipmentForm-DQLbo_9A.js","assets/MovementForm-DK6I27rT.js","assets/ImportModal-CDY7Tm-r.js","assets/AuthModal-Beqa6Mh-.js"])))=>i.map(i=>d[i]);
import{r as t,j as e,_ as q}from"./index-CXMtpIWm.js";import{s as p}from"./supabase-DllM73rC.js";const $=t.createContext(null);async function ee(n){const{data:u,error:o}=await p.from("profiles").select("*").eq("user_id",n).maybeSingle();if(o)throw o;return u??null}function te({children:n}){const[u,o]=t.useState({user:null,isAuthenticated:!1,isAdmin:!1,isLoading:!0,error:null}),d=t.useRef(null),l=t.useRef(null),h=t.useRef(!0),b=t.useCallback(()=>{d.current=null,l.current=null,h.current&&o({user:null,isAuthenticated:!1,isAdmin:!1,isLoading:!1,error:null})},[]),_=t.useCallback(m=>{h.current&&o({user:m,isAuthenticated:!0,isAdmin:m.role==="admin",isLoading:!1,error:null})},[]),f=t.useCallback(async m=>{if(d.current===m&&l.current)return l.current;d.current=m;const g=(async()=>{try{return await ee(m)}catch(c){return console.error("Profile fetch error:",c),null}})();return l.current=g,g},[]);t.useEffect(()=>{h.current=!0;const m=async c=>{var y,C;if(!((y=c==null?void 0:c.user)!=null&&y.id)){b();return}if(!h.current)return;o(S=>({...S,isLoading:!0,error:null}));const x=c.user.id,k=await f(x);h.current&&d.current===x&&_(k||{id:x,user_id:x,email:c.user.email||"",full_name:((C=c.user.user_metadata)==null?void 0:C.full_name)||c.user.email||"",role:"standard",created_at:new Date().toISOString()})};p.auth.getSession().then(({data:c})=>{m(c.session)});const{data:{subscription:g}}=p.auth.onAuthStateChange((c,x)=>{m(x)});return()=>{h.current=!1,g.unsubscribe()}},[f,_,b]);const i=t.useCallback(async(m,g)=>{o(x=>({...x,isLoading:!0,error:null}));const{error:c}=await p.auth.signInWithPassword({email:m,password:g});c&&o(x=>({...x,isLoading:!1,error:c.message}))},[]),L=t.useCallback(async(m,g,c,x="standard")=>{var C;o(S=>({...S,isLoading:!0,error:null}));const{data:k,error:y}=await p.auth.signUp({email:m,password:g,options:{data:{full_name:c}}});if(y){o(S=>({...S,isLoading:!1,error:y.message}));return}(C=k.user)!=null&&C.id&&await p.from("profiles").upsert({user_id:k.user.id,email:m,full_name:c,role:x})},[]),v=t.useCallback(async()=>{await p.auth.signOut()},[]),M=t.useCallback(()=>{o(m=>({...m,error:null}))},[]);return e.jsx($.Provider,{value:{...u,signIn:i,signUp:L,signOut:v,clearError:M},children:n})}function B(){const n=t.useContext($);if(!n)throw new Error("useAuth must be used within AuthProvider");return n}function U(n){if(!n.test_tag_next_due)return"No Tag";const u=new Date,o=new Date(n.test_tag_next_due),d=Math.ceil((o.getTime()-u.getTime())/(1e3*60*60*24));return d<0?"Expired":d<=n.tag_threshold_days?"Due Soon":"OK"}function T(n){if(n.current_status==="Maintenance")return"Maintenance";if(n.current_status==="In Use"){if(n.expected_return_date){const u=new Date;if(new Date(n.expected_return_date)<u)return"Overdue"}return"In Use"}return"Available"}function je(n){switch(n){case"OK":return{bg:"bg-emerald-50",text:"text-emerald-700",border:"border-emerald-200"};case"Due Soon":return{bg:"bg-amber-50",text:"text-amber-700",border:"border-amber-200"};case"Expired":return{bg:"bg-red-50",text:"text-red-700",border:"border-red-200"};case"No Tag":return{bg:"bg-gray-50",text:"text-gray-500",border:"border-gray-200"}}}function _e(n){switch(n){case"Available":return{bg:"bg-emerald-50",text:"text-emerald-700",dot:"bg-emerald-500"};case"In Use":return{bg:"bg-blue-50",text:"text-blue-700",dot:"bg-blue-500"};case"Overdue":return{bg:"bg-red-50",text:"text-red-700",dot:"bg-red-500"};case"Maintenance":return{bg:"bg-orange-50",text:"text-orange-700",dot:"bg-orange-500"}}}const ke=["Power Tools","Survey Equipment","Compaction","Power Supply","Cutting Equipment","Fastening Tools","Demolition","Electrical Testing","Access Equipment","General","Safety Equipment","Hand Tools"],H=t.createContext(null);function D(n,u){const o=n.toLowerCase(),d=u.toLowerCase();if(o.includes(d))return!0;let l=0;for(let h=0;h<o.length&&l<d.length;h++)o[h]===d[l]&&l++;return l===d.length}function se({children:n}){const[u,o]=t.useState([]),[d,l]=t.useState([]),[h,b]=t.useState(!0),[_,f]=t.useState(null),[i,L]=t.useState(""),[v,M]=t.useState("All"),[m,g]=t.useState(null),c=t.useCallback(async()=>{b(!0),f(null);const s=new AbortController,r=setTimeout(()=>s.abort(),12e3);try{const[a,w]=await Promise.all([p.from("equipment").select("*").order("asset_id",{ascending:!0}).abortSignal(s.signal),p.from("movements").select("*").order("event_timestamp",{ascending:!1}).abortSignal(s.signal)]);if(clearTimeout(r),a.error)throw a.error;if(w.error)throw w.error;const z=(a.data||[]).map(O=>({...O,current_status:T(O)}));o(z),l(w.data||[])}catch(a){a.name==="AbortError"?f("Request timed out. Please try again."):f(a.message||"Failed to load data")}finally{b(!1)}},[]);t.useEffect(()=>{c()},[c]);const x=t.useMemo(()=>{const s={total:0,available:0,inUse:0,overdue:0,expiredTags:0,dueSoon:0};return u.forEach(r=>{s.total++;const a=T(r);a==="Available"&&s.available++,a==="In Use"&&s.inUse++,a==="Overdue"&&s.overdue++;const w=U(r);w==="Expired"&&s.expiredTags++,w==="Due Soon"&&s.dueSoon++}),s},[u]),k=t.useMemo(()=>{let s=u;switch(v){case"Available":s=s.filter(r=>T(r)==="Available");break;case"In Use":s=s.filter(r=>T(r)==="In Use");break;case"Overdue":s=s.filter(r=>T(r)==="Overdue");break;case"Expired Tags":s=s.filter(r=>U(r)==="Expired");break;case"Due Soon":s=s.filter(r=>U(r)==="Due Soon");break}return i.trim()&&(s=s.filter(r=>D(r.name,i)||D(r.asset_id,i)||D(r.category,i)||D(r.assigned_to||"",i)||D(r.assigned_site||"",i))),s},[u,v,i]),y=t.useMemo(()=>m&&u.find(s=>s.id===m)||null,[m,u]),C=t.useMemo(()=>m?d.filter(s=>s.equipment_id===m):[],[m,d]),S=t.useCallback(s=>{g(s)},[]),N=t.useCallback(async s=>{try{const{data:r,error:a}=await p.from("equipment").insert(s).select().single();if(a)throw a;return await c(),r}catch(r){return f(r.message),null}},[c]),A=t.useCallback(async(s,r)=>{try{const{error:a}=await p.from("equipment").update({...r,updated_at:new Date().toISOString()}).eq("id",s);if(a)throw a;return await c(),!0}catch(a){return f(a.message),!1}},[c]),I=t.useCallback(async s=>{try{const{error:r}=await p.from("movements").insert(s);if(r)throw r;const a={};if(s.event_type==="check_out"?(a.current_status="In Use",a.assigned_to=s.assigned_to||"",a.assigned_site=s.site||"",a.assigned_job=s.job_reference||"",a.expected_return_date=s.expected_return_date||null):s.event_type==="return"&&(a.current_status="Available",a.assigned_to="",a.assigned_site="",a.assigned_job="",a.expected_return_date=null),s.equipment_id){const{error:w}=await p.from("equipment").update({...a,updated_at:new Date().toISOString()}).eq("id",s.equipment_id);if(w)throw w}return await c(),!0}catch(r){return f(r.message),!1}},[c]),R=t.useCallback(async(s,r)=>{try{const{error:a}=await p.storage.from("equipment-photos").upload(r,s,{upsert:!0});if(a)throw a;const{data:w}=p.storage.from("equipment-photos").getPublicUrl(r);return w.publicUrl}catch(a){return f(a.message),null}},[]);return e.jsx(H.Provider,{value:{equipment:u,movements:d,isLoading:h,error:_,searchQuery:i,activeFilter:v,filteredEquipment:k,stats:x,selectedEquipment:y,selectedMovements:C,setSearchQuery:L,setActiveFilter:M,selectEquipment:S,refreshData:c,createEquipment:N,updateEquipment:A,createMovement:I,uploadPhoto:R},children:n})}function W(){const n=t.useContext(H);if(!n)throw new Error("useEquipment must be used within EquipmentProvider");return n}function re({onOpenAuth:n,currentView:u,onScanResult:o,onToggleSidebar:d}){var v;const{user:l,isAdmin:h,setDemoRole:b,signOut:_}=B(),[f,i]=t.useState(!1),L={dashboard:"Dashboard",equipment:"Equipment Registry",detail:"Equipment Detail"};return e.jsx("header",{className:"sticky top-0 z-20 bg-slate-900/70 backdrop-blur-xl ring-1 ring-white/10",children:e.jsxs("div",{className:"px-4 lg:px-6 h-16 flex items-center justify-between gap-4",children:[e.jsxs("div",{className:"flex items-center gap-3 min-w-0",children:[e.jsx("button",{type:"button","aria-label":"Open menu",onClick:()=>d==null?void 0:d(),className:"lg:hidden inline-flex items-center justify-center rounded-lg border border-slate-700 bg-slate-800 p-2 text-slate-300 hover:bg-slate-700 transition-colors",children:e.jsx("svg",{className:"h-5 w-5",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M4 6h16M4 12h16M4 18h16"})})}),e.jsx("h1",{className:"text-lg font-semibold text-slate-100 truncate",children:L[u]||"Dashboard"})]}),e.jsxs("div",{className:"flex items-center gap-2 flex-shrink-0",children:[e.jsx("button",{className:"hidden sm:inline-flex items-center gap-2 px-3 py-2 bg-amber-500 hover:bg-amber-600 text-black rounded-lg text-xs font-semibold transition-colors",children:"Scan QR"}),e.jsxs("div",{className:"hidden md:flex items-center bg-slate-800 rounded-lg p-0.5 border border-slate-700",children:[e.jsx("button",{onClick:()=>b("admin"),className:`px-2.5 py-1 rounded-md text-xs font-medium transition-all ${h?"bg-slate-700 text-white":"text-slate-400 hover:text-white"}`,children:"Admin"}),e.jsx("button",{onClick:()=>b("standard"),className:`px-2.5 py-1 rounded-md text-xs font-medium transition-all ${h?"text-slate-400 hover:text-white":"bg-slate-700 text-white"}`,children:"Standard"})]}),e.jsxs("div",{className:"relative",children:[e.jsxs("button",{onClick:()=>i(!f),className:"flex items-center gap-2 rounded-lg px-2 py-1.5 hover:bg-slate-800 transition-colors",children:[e.jsx("div",{className:"w-8 h-8 rounded-full bg-slate-700 flex items-center justify-center text-white text-sm font-semibold",children:((v=l==null?void 0:l.full_name)==null?void 0:v.charAt(0))||"U"}),e.jsx("span",{className:"hidden lg:block text-sm text-slate-300",children:(l==null?void 0:l.full_name)||"User"})]}),f&&e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"fixed inset-0 z-30",onClick:()=>i(!1)}),e.jsxs("div",{className:"absolute right-0 mt-2 w-56 bg-slate-800 border border-slate-700 rounded-xl shadow-xl z-40 overflow-hidden",children:[e.jsxs("div",{className:"px-4 py-3 border-b border-slate-700",children:[e.jsx("p",{className:"text-sm font-medium text-slate-100",children:l==null?void 0:l.full_name}),e.jsx("p",{className:"text-xs text-slate-400",children:l==null?void 0:l.email})]}),e.jsx("button",{onClick:()=>{n(),i(!1)},className:"w-full text-left px-4 py-2 text-sm text-slate-300 hover:bg-slate-700 transition-colors",children:"Account"}),e.jsx("button",{onClick:()=>{_(),i(!1)},className:"w-full text-left px-4 py-2 text-sm text-red-400 hover:bg-slate-700 transition-colors",children:"Sign Out"})]})]})]})]})]})})}function ne({currentView:n,onNavigate:u,collapsed:o,onToggle:d}){const{stats:l}=W(),h="/long-line-tracker-v2/LLT-developer-logo.png",b=[{id:"dashboard",label:"Dashboard",icon:e.jsx("svg",{className:"w-5 h-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:1.5,children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M3.75 6A2.25 2.25 0 016 3.75h2.25A2.25 2.25 0 0110.5 6v2.25a2.25 2.25 0 01-2.25 2.25H6a2.25 2.25 0 01-2.25-2.25V6zM3.75 15.75A2.25 2.25 0 016 13.5h2.25a2.25 2.25 0 012.25 2.25V18a2.25 2.25 0 01-2.25 2.25H6A2.25 2.25 0 013.75 18v-2.25zM13.5 6a2.25 2.25 0 012.25-2.25H18A2.25 2.25 0 0120.25 6v2.25A2.25 2.25 0 0118 10.5h-2.25a2.25 2.25 0 01-2.25-2.25V6zM13.5 15.75a2.25 2.25 0 012.25-2.25H18a2.25 2.25 0 012.25 2.25V18A2.25 2.25 0 0118 20.25h-2.25A2.25 2.25 0 0113.5 18v-2.25z"})})},{id:"equipment",label:"Equipment",badge:l.total,icon:e.jsx("svg",{className:"w-5 h-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:1.5,children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M11.42 15.17l-5.384-3.19A2.625 2.625 0 015.25 9.75V6.375a2.625 2.625 0 012.786-2.619l5.384.319M11.42 15.17l5.384 3.19A2.625 2.625 0 0017.25 16.5V6.375a2.625 2.625 0 00-2.786-2.619l-5.384.319M11.42 15.17V20.25"})})}],_=[{label:"Overdue",count:l.overdue,color:"bg-red-500"},{label:"Expired Tags",count:l.expiredTags,color:"bg-red-400"},{label:"Due Soon",count:l.dueSoon,color:"bg-amber-500"}],f=i=>n===i||i==="equipment"&&n==="detail";return e.jsxs("aside",{className:`${o?"w-16":"w-64"} h-screen flex flex-col transition-[width] duration-300
        bg-slate-900/35 backdrop-blur-xl ring-1 ring-white/10`,children:[e.jsxs("div",{className:"h-16 flex items-center gap-3 px-4 border-b border-white/10",children:[e.jsx("img",{src:h,alt:"Long Line Tracker",className:"w-10 h-10 object-contain",draggable:!1}),!o&&e.jsxs("div",{className:"min-w-0",children:[e.jsx("div",{className:"text-white font-semibold leading-tight",children:"Long Line"}),e.jsx("div",{className:"text-[10px] text-slate-400 font-medium tracking-wider uppercase",children:"Tracker v2"})]})]}),e.jsx("nav",{className:"flex-1 px-2 py-4 space-y-1 overflow-y-auto",children:b.map(i=>e.jsxs("button",{onClick:()=>u(i.id),title:o?i.label:void 0,className:`w-full flex items-center gap-3 px-3 py-2.5 rounded-xl text-sm font-medium transition-colors ${f(i.id)?"bg-amber-500/15 text-amber-200 ring-1 ring-amber-400/15":"text-slate-300 hover:text-white hover:bg-white/5"}`,children:[e.jsx("span",{className:"shrink-0",children:i.icon}),!o&&e.jsxs(e.Fragment,{children:[e.jsx("span",{className:"flex-1 text-left truncate",children:i.label}),typeof i.badge=="number"&&e.jsx("span",{className:"bg-white/10 text-slate-200 text-xs px-2 py-0.5 rounded-full",children:i.badge})]})]},i.id))}),!o&&e.jsx("div",{className:"px-3 pb-4",children:e.jsxs("div",{className:"bg-white/5 rounded-xl p-3 ring-1 ring-white/10",children:[e.jsx("p",{className:"text-[10px] font-semibold text-slate-400 uppercase tracking-wider mb-2",children:"Alerts"}),e.jsx("div",{className:"space-y-2",children:_.map(i=>e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-xs text-slate-300",children:i.label}),e.jsx("span",{className:`${i.color} text-white text-xs font-bold px-1.5 py-0.5 rounded`,children:i.count})]},i.label))})]})}),e.jsx("button",{onClick:d,className:"h-12 flex items-center justify-center border-t border-white/10 text-slate-300 hover:text-white hover:bg-white/5 transition-colors",title:o?"Expand":"Collapse",children:e.jsx("svg",{className:`w-5 h-5 transition-transform ${o?"rotate-180":""}`,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:1.5,children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M18.75 19.5l-7.5-7.5 7.5-7.5m-6 15L5.25 12l7.5-7.5"})})})]})}function ae({message:n,type:u,onClose:o,duration:d=4e3}){t.useEffect(()=>{const b=setTimeout(o,d);return()=>clearTimeout(b)},[o,d]);const l={success:"bg-emerald-600",error:"bg-red-600",info:"bg-slate-800/70 backdrop-blur-md"},h={success:e.jsx("svg",{className:"w-5 h-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9 12.75L11.25 15 15 9.75M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})}),error:e.jsx("svg",{className:"w-5 h-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 9v3.75m9-.75a9 9 0 11-18 0 9 9 0 0118 0zm-9 3.75h.008v.008H12v-.008z"})}),info:e.jsx("svg",{className:"w-5 h-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M11.25 11.25l.041-.02a.75.75 0 011.063.852l-.708 2.836a.75.75 0 001.063.853l.041-.021M21 12a9 9 0 11-18 0 9 9 0 0118 0zm-9-3.75h.008v.008H12V8.25z"})})};return e.jsx("div",{className:"fixed top-4 right-4 z-[100] animate-slide-in",children:e.jsxs("div",{className:`${l[u]} text-white rounded-xl shadow-lg px-4 py-3 flex items-center gap-3 min-w-[300px]`,children:[h[u],e.jsx("p",{className:"text-sm font-medium flex-1",children:n}),e.jsx("button",{onClick:o,className:"p-1 hover:bg-white/10 rounded-lg transition-colors",children:e.jsx("svg",{className:"w-4 h-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6 18L18 6M6 6l12 12"})})})]})})}const F={shell:"text-white bg-gradient-to-b from-[#050A12] via-[#0B1626] to-[#071A2E]",card:"rounded-2xl bg-slate-800/50 backdrop-blur-md ring-1 ring-white/5 shadow-[0_12px_35px_rgba(0,0,0,0.35)]",cardHover:"transition-colors hover:bg-slate-800/60 hover:ring-white/10",cardPad:"p-4 md:p-6",divider:"border-white/10",input:"bg-slate-900/40 text-white placeholder:text-slate-500 border-white/10 focus-visible:ring-2 focus-visible:ring-amber-500/40 focus-visible:ring-offset-0"},oe=t.lazy(()=>q(()=>import("./Dashboard-_cuqz3gV.js"),__vite__mapDeps([0,1,2,3]))),le=t.lazy(()=>q(()=>import("./EquipmentList-CF53TGYV.js"),__vite__mapDeps([4,1,2,5,3]))),ie=t.lazy(()=>q(()=>import("./EquipmentDetail-Ce_4hP5G.js"),__vite__mapDeps([6,1,2,5,3]))),ce=t.lazy(()=>q(()=>import("./EquipmentForm-DQLbo_9A.js"),__vite__mapDeps([7,1,2,3]))),ue=t.lazy(()=>q(()=>import("./MovementForm-DK6I27rT.js"),__vite__mapDeps([8,1,2,3]))),de=t.lazy(()=>q(()=>import("./ImportModal-CDY7Tm-r.js"),__vite__mapDeps([9,1,2,3]))),me=t.lazy(()=>q(()=>import("./AuthModal-Beqa6Mh-.js"),__vite__mapDeps([10,1,2,3])));function he(){const[n,u]=t.useState("dashboard"),[o,d]=t.useState(!1),[l,h]=t.useState(!1),[b,_]=t.useState(),[f,i]=t.useState(!1),[L,v]=t.useState(!1),[M,m]=t.useState(!1),[g,c]=t.useState(!1),[x,k]=t.useState(null),[y,C]=t.useState(null),{selectedEquipment:S,selectEquipment:N,refreshData:A,equipment:I}=W(),{isAuthenticated:R,isLoading:s}=B(),r=t.useCallback((j,E="success")=>{C({message:j,type:E})},[]),a=t.useCallback((j,E)=>{u(j),_(E||void 0),h(!1)},[]),w=t.useCallback(j=>{N(j),u("detail"),h(!1)},[N]),z=t.useCallback(()=>{N(null),u("equipment")},[N]),O=t.useCallback(()=>{c(!1),v(!0)},[]),Q=t.useCallback(()=>{c(!0),v(!0)},[]),G=t.useCallback(j=>{k(j)},[]),K=t.useCallback(()=>{v(!1),r(g?"Equipment updated successfully":"Equipment created successfully"),A()},[g,r,A]),J=t.useCallback(()=>{m(!1),r("Equipment imported successfully"),A()},[r,A]),X=t.useCallback(()=>{k(null),r("Movement recorded successfully"),A()},[r,A]),Y=t.useCallback(j=>{const E=(j||"").trim();if(!E)return;const V=I.find(P=>P.qr_code&&P.qr_code.toLowerCase()===E.toLowerCase()||P.asset_id&&P.asset_id.toLowerCase()===E.toLowerCase());V?(N(V.id),u("detail"),r("Navigated to  ()","success"),h(!1)):r(`No equipment found for QR code: ${E}`,"error")},[I,N,r]);if(s)return e.jsx("div",{className:`min-h-screen flex items-center justify-center text-slate-300 ${F.shell}`,children:"Loadingâ€¦"});if(!R)return e.jsx("div",{className:`min-h-screen flex items-center justify-center ${F.shell}`,children:e.jsx(t.Suspense,{fallback:null,children:e.jsx(me,{onClose:()=>{}})})});const Z=e.jsx("div",{className:"text-slate-400",children:"Loading..."});return e.jsxs("div",{className:"min-h-screen",children:[e.jsxs("div",{className:"hidden md:flex min-h-screen",children:[e.jsx(ne,{currentView:n,onNavigate:a,collapsed:o,onToggle:()=>d(j=>!j)}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx(re,{onOpenAuth:()=>i(!0),currentView:n,onScanResult:Y,onToggleSidebar:()=>h(j=>!j)}),e.jsx("div",{className:"p-4 lg:p-6",children:e.jsxs(t.Suspense,{fallback:Z,children:[n==="dashboard"&&e.jsx(oe,{onNavigate:a}),n==="equipment"&&e.jsx(le,{onSelectEquipment:w,onCreateNew:O,onImport:()=>m(!0),initialFilter:b}),n==="detail"&&e.jsx(ie,{onBack:z,onEdit:Q,onMovement:G})]})})]})]}),e.jsxs(t.Suspense,{fallback:null,children:[L&&e.jsx(ce,{equipment:g?S:null,onClose:()=>v(!1),onSuccess:K}),x&&S&&e.jsx(ue,{type:x,equipment:S,onClose:()=>k(null),onSuccess:X}),M&&e.jsx(de,{onClose:()=>m(!1),onSuccess:J})]}),y&&e.jsx(ae,{message:y.message,type:y.type,onClose:()=>C(null)})]})}function xe(){return e.jsx(te,{children:e.jsx(se,{children:e.jsx(he,{})})})}const fe={sidebarOpen:!1,toggleSidebar:()=>{}},pe=t.createContext(fe),be=({children:n})=>{const[u,o]=t.useState(!1),d=()=>{o(l=>!l)};return e.jsx(pe.Provider,{value:{sidebarOpen:u,toggleSidebar:d},children:n})},ge=()=>e.jsx(be,{children:e.jsx(xe,{})}),ye=Object.freeze(Object.defineProperty({__proto__:null,default:ge},Symbol.toStringTag,{value:"Module"}));export{ke as C,ye as I,F as U,B as a,T as b,U as c,je as d,_e as g,W as u};
