import{r as b,R as y,j as e}from"./index-Pse_v-NO.js";import{u as A,a as L,b as g,c as v}from"./Index-CupScY8h.js";import{S as f,T as N}from"./StatusBadge-I5lgH0KR.js";import{U as i}from"./ui-Dl3EeYDA.js";import"./supabase-DllM73rC.js";const _=["All","Available","In Use","Overdue","Expired Tags","Due Soon"];function z({onSelectEquipment:t,onCreateNew:l,onImport:d,initialFilter:s}){const{filteredEquipment:r,searchQuery:o,setSearchQuery:h,activeFilter:p,setActiveFilter:c,stats:n,isLoading:u}=A(),{isAdmin:x}=L(),[m,j]=b.useState("grid");y.useEffect(()=>{s&&c(s)},[s,c]);const w={All:n.total,Available:n.available,"In Use":n.inUse,Overdue:n.overdue,"Expired Tags":n.expiredTags,"Due Soon":n.dueSoon};return e.jsxs("div",{className:"flex flex-col h-full",children:[e.jsxs("div",{className:`px-6 py-4 ${i.card} ${i.cardPad} space-y-4`,children:[e.jsxs("div",{className:"flex items-center justify-between gap-4",children:[e.jsxs("div",{className:"relative flex-1 max-w-md",children:[e.jsx("svg",{className:"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-slate-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M21 21l-5.197-5.197m0 0A7.5 7.5 0 105.196 5.196a7.5 7.5 0 0010.607 10.607z"})}),e.jsx("input",{type:"text",value:o,onChange:a=>h(a.target.value),placeholder:"Search equipment, asset ID, category...",className:`w-full pl-10 pr-4 py-2.5 rounded-lg text-sm focus:outline-none border ${i.input}`}),o&&e.jsx("button",{onClick:()=>h(""),className:"absolute right-3 top-1/2 -translate-y-1/2 text-slate-400 hover:text-slate-200",children:e.jsx("svg",{className:"w-4 h-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6 18L18 6M6 6l12 12"})})})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs("div",{className:"flex items-center bg-slate-900/30 rounded-lg p-0.5",children:[e.jsx("button",{onClick:()=>j("grid"),className:`p-2 rounded-md transition-all ${m==="grid"?"bg-slate-800/60 ring-1 ring-white/10 text-white":"text-slate-400"}`,children:e.jsx("svg",{className:"w-4 h-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M3.75 6A2.25 2.25 0 016 3.75h2.25A2.25 2.25 0 0110.5 6v2.25a2.25 2.25 0 01-2.25 2.25H6a2.25 2.25 0 01-2.25-2.25V6zM3.75 15.75A2.25 2.25 0 016 13.5h2.25a2.25 2.25 0 012.25 2.25V18a2.25 2.25 0 01-2.25 2.25H6A2.25 2.25 0 013.75 18v-2.25zM13.5 6a2.25 2.25 0 012.25-2.25H18A2.25 2.25 0 0120.25 6v2.25A2.25 2.25 0 0118 10.5h-2.25a2.25 2.25 0 01-2.25-2.25V6zM13.5 15.75a2.25 2.25 0 012.25-2.25H18a2.25 2.25 0 012.25 2.25V18A2.25 2.25 0 0118 20.25h-2.25A2.25 2.25 0 0113.5 18v-2.25z"})})}),e.jsx("button",{onClick:()=>j("table"),className:`p-2 rounded-md transition-all ${m==="table"?"bg-slate-800/60 ring-1 ring-white/10 text-white":"text-slate-400"}`,children:e.jsx("svg",{className:"w-4 h-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M3.75 12h16.5m-16.5 3.75h16.5M3.75 19.5h16.5M5.625 4.5h12.75a1.875 1.875 0 010 3.75H5.625a1.875 1.875 0 010-3.75z"})})})]}),x&&e.jsxs(e.Fragment,{children:[e.jsxs("button",{onClick:d,className:"px-3 py-2.5 border border-white/10 rounded-lg text-sm font-medium text-slate-200 hover:bg-slate-900/40 transition-colors flex items-center gap-2",children:[e.jsx("svg",{className:"w-4 h-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:1.5,children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M3 16.5v2.25A2.25 2.25 0 005.25 21h13.5A2.25 2.25 0 0021 18.75V16.5m-13.5-9L12 3m0 0l4.5 4.5M12 3v13.5"})}),"Import"]}),e.jsxs("button",{onClick:l,className:"px-4 py-2.5 bg-amber-500/90 text-slate-950 rounded-lg text-sm font-semibold hover:bg-amber-500 transition-colors flex items-center gap-2",children:[e.jsx("svg",{className:"w-4 h-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 4.5v15m7.5-7.5h-15"})}),"Add Equipment"]})]})]})]}),e.jsx("div",{className:"flex items-center gap-1 overflow-x-auto pb-1",children:_.map(a=>e.jsxs("button",{onClick:()=>c(a),className:`px-3 py-1.5 rounded-lg text-sm font-medium whitespace-nowrap transition-all ${p===a?"bg-amber-500/25 text-amber-200 ring-1 ring-amber-400/20":"text-slate-400 hover:text-slate-200 hover:bg-slate-900/30"}`,children:[a,e.jsx("span",{className:`ml-1.5 text-xs ${p===a?"text-white/70":"text-slate-400"}`,children:w[a]})]},a))})]}),e.jsxs("div",{className:"flex-1 overflow-y-auto p-6",children:[u?e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 xl:grid-cols-3 gap-4",children:[...Array(6)].map((a,k)=>e.jsxs("div",{className:"bg-slate-800/50 rounded-2xl p-5 ring-1 ring-white/5 animate-pulse",children:[e.jsx("div",{className:"h-4 bg-white/10 rounded w-3/4 mb-3"}),e.jsx("div",{className:"h-3 bg-white/10 rounded w-1/2 mb-4"}),e.jsx("div",{className:"h-6 bg-white/10 rounded w-20"})]},k))}):r.length===0?e.jsxs("div",{className:"flex flex-col items-center justify-center py-20 text-slate-400",children:[e.jsx("svg",{className:"w-16 h-16 mb-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:1,children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M20.25 7.5l-.625 10.632a2.25 2.25 0 01-2.247 2.118H6.622a2.25 2.25 0 01-2.247-2.118L3.75 7.5M10 11.25h4M3.375 7.5h17.25c.621 0 1.125-.504 1.125-1.125v-1.5c0-.621-.504-1.125-1.125-1.125H3.375c-.621 0-1.125.504-1.125 1.125v1.5c0 .621.504 1.125 1.125 1.125z"})}),e.jsx("p",{className:"text-lg font-medium mb-1",children:"No equipment found"}),e.jsx("p",{className:"text-sm",children:"Try adjusting your search or filter criteria"})]}):m==="grid"?e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 xl:grid-cols-3 gap-4",children:r.map(a=>e.jsx(M,{equipment:a,onClick:()=>t(a.id),isAdmin:x},a.id))}):e.jsx(C,{equipment:r,onSelect:t,isAdmin:x}),!u&&r.length>0&&e.jsxs("p",{className:"text-xs text-slate-400 mt-4 text-center",children:["Showing ",r.length," of ",n.total," items"]})]})]})}function M({equipment:t,onClick:l,isAdmin:d}){const s=g(t),r=v(t);return e.jsxs("button",{onClick:l,className:`p-5 text-left group w-full ${i.card} ${i.cardHover}`,children:[e.jsxs("div",{className:"flex items-start justify-between mb-3",children:[e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[e.jsx("span",{className:"text-xs font-mono text-slate-400 bg-slate-900/40 px-1.5 py-0.5 rounded",children:t.asset_id}),e.jsx("span",{className:"text-xs text-slate-400",children:t.category})]}),e.jsx("h3",{className:"text-sm font-semibold text-white truncate group-hover:text-amber-300 transition-colors",children:t.name})]}),e.jsx("svg",{className:"w-4 h-4 text-slate-500 group-hover:text-slate-400 flex-shrink-0 mt-1 transition-colors",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5l7 7-7 7"})})]}),e.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[e.jsx(f,{status:s}),e.jsx(N,{state:r})]}),t.test_tag_next_due&&e.jsxs("p",{className:"text-xs text-slate-400 mb-2",children:["Next test: ",new Date(t.test_tag_next_due).toLocaleDateString("en-AU",{day:"numeric",month:"short",year:"numeric"})]}),s!=="Available"&&t.assigned_to&&e.jsxs("div",{className:"mt-3 pt-3 border-t border-white/10 space-y-1",children:[e.jsxs("div",{className:"flex items-center gap-2 text-xs",children:[e.jsx("svg",{className:"w-3.5 h-3.5 text-slate-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:1.5,children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15.75 6a3.75 3.75 0 11-7.5 0 3.75 3.75 0 017.5 0zM4.501 20.118a7.5 7.5 0 0114.998 0A17.933 17.933 0 0112 21.75c-2.676 0-5.216-.584-7.499-1.632z"})}),e.jsx("span",{className:"text-slate-300 font-medium",children:t.assigned_to})]}),e.jsxs("div",{className:"flex items-center gap-2 text-xs",children:[e.jsxs("svg",{className:"w-3.5 h-3.5 text-slate-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:1.5,children:[e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15 10.5a3 3 0 11-6 0 3 3 0 016 0z"}),e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M19.5 10.5c0 7.142-7.5 11.25-7.5 11.25S4.5 17.642 4.5 10.5a7.5 7.5 0 1115 0z"})]}),e.jsx("span",{className:"text-slate-400",children:t.assigned_site})]}),t.expected_return_date&&e.jsxs("div",{className:"flex items-center gap-2 text-xs",children:[e.jsx("svg",{className:"w-3.5 h-3.5 text-slate-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:1.5,children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6.75 3v2.25M17.25 3v2.25M3 18.75V7.5a2.25 2.25 0 012.25-2.25h13.5A2.25 2.25 0 0121 7.5v11.25m-18 0A2.25 2.25 0 005.25 21h13.5A2.25 2.25 0 0021 18.75m-18 0v-7.5A2.25 2.25 0 015.25 9h13.5A2.25 2.25 0 0121 11.25v7.5"})}),e.jsxs("span",{className:`${new Date(t.expected_return_date)<new Date?"text-red-500 font-medium":"text-slate-400"}`,children:["Due: ",new Date(t.expected_return_date).toLocaleDateString("en-AU",{day:"numeric",month:"short"})]})]})]})]})}function C({equipment:t,onSelect:l,isAdmin:d}){return e.jsx("div",{className:`overflow-hidden ${i.card}`,children:e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{children:e.jsxs("tr",{className:`border-b ${i.divider}`,children:[e.jsx("th",{className:"text-left px-4 py-3 text-xs font-semibold text-slate-400 uppercase tracking-wider",children:"Asset"}),e.jsx("th",{className:"text-left px-4 py-3 text-xs font-semibold text-slate-400 uppercase tracking-wider",children:"Category"}),e.jsx("th",{className:"text-left px-4 py-3 text-xs font-semibold text-slate-400 uppercase tracking-wider",children:"Status"}),e.jsx("th",{className:"text-left px-4 py-3 text-xs font-semibold text-slate-400 uppercase tracking-wider",children:"Tag"}),e.jsx("th",{className:"text-left px-4 py-3 text-xs font-semibold text-slate-400 uppercase tracking-wider",children:"Assigned To"}),e.jsx("th",{className:"text-left px-4 py-3 text-xs font-semibold text-slate-400 uppercase tracking-wider",children:"Site"}),e.jsx("th",{className:"text-left px-4 py-3 text-xs font-semibold text-slate-400 uppercase tracking-wider",children:"Next Test"})]})}),e.jsx("tbody",{className:"divide-y divide-white/5",children:t.map(s=>{const r=g(s),o=v(s);return e.jsxs("tr",{onClick:()=>l(s.id),className:"hover:bg-slate-900/40 cursor-pointer transition-colors",children:[e.jsx("td",{className:"px-4 py-3",children:e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-white",children:s.name}),e.jsx("p",{className:"text-xs text-slate-400 font-mono",children:s.asset_id})]})}),e.jsx("td",{className:"px-4 py-3 text-sm text-slate-300",children:s.category}),e.jsx("td",{className:"px-4 py-3",children:e.jsx(f,{status:r})}),e.jsx("td",{className:"px-4 py-3",children:e.jsx(N,{state:o})}),e.jsx("td",{className:"px-4 py-3 text-sm text-slate-300",children:s.assigned_to||"-"}),e.jsx("td",{className:"px-4 py-3 text-sm text-slate-300",children:s.assigned_site||"-"}),e.jsx("td",{className:"px-4 py-3 text-xs text-slate-400",children:s.test_tag_next_due?new Date(s.test_tag_next_due).toLocaleDateString("en-AU",{day:"numeric",month:"short",year:"numeric"}):"-"})]},s.id)})})]})})})}export{z as default};
