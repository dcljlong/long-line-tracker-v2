const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/Dashboard-8aYGQXHt.js","assets/index-7K_wa8a5.js","assets/index-CqEk0I2n.css","assets/supabase-DllM73rC.js","assets/EquipmentList-CpKyzXJD.js","assets/StatusBadge-D-Wl2BTm.js","assets/EquipmentDetail-Cys9ppz3.js","assets/EquipmentForm-BSr_bSU5.js","assets/MovementForm-CNlquLU1.js","assets/ImportModal-DCupL-xj.js","assets/AuthModal-xb6KgheJ.js"])))=>i.map(i=>d[i]);
import{r as t,j as e,_ as M}from"./index-7K_wa8a5.js";import{s as b}from"./supabase-DllM73rC.js";const B=t.createContext(null);async function te(n){const{data:u,error:o}=await b.from("profiles").select("*").eq("user_id",n).maybeSingle();if(o)throw o;return u??null}function se({children:n}){const[u,o]=t.useState({user:null,isAuthenticated:!1,isAdmin:!1,isLoading:!0,error:null}),d=t.useRef(null),l=t.useRef(null),x=t.useRef(!0),g=t.useCallback(()=>{d.current=null,l.current=null,x.current&&o({user:null,isAuthenticated:!1,isAdmin:!1,isLoading:!1,error:null})},[]),k=t.useCallback(m=>{x.current&&o({user:m,isAuthenticated:!0,isAdmin:m.role==="admin",isLoading:!1,error:null})},[]),p=t.useCallback(async m=>{if(d.current===m&&l.current)return l.current;d.current=m;const v=(async()=>{try{return await te(m)}catch(c){return console.error("Profile fetch error:",c),null}})();return l.current=v,v},[]);t.useEffect(()=>{x.current=!0;const m=async c=>{var S,E;if(!((S=c==null?void 0:c.user)!=null&&S.id)){g();return}if(!x.current)return;o(C=>({...C,isLoading:!0,error:null}));const f=c.user.id,y=await p(f);x.current&&d.current===f&&k(y||{id:f,user_id:f,email:c.user.email||"",full_name:((E=c.user.user_metadata)==null?void 0:E.full_name)||c.user.email||"",role:"standard",created_at:new Date().toISOString()})};b.auth.getSession().then(({data:c})=>{m(c.session)});const{data:{subscription:v}}=b.auth.onAuthStateChange((c,f)=>{m(f)});return()=>{x.current=!1,v.unsubscribe()}},[p,k,g]);const i=t.useCallback(async(m,v)=>{o(f=>({...f,isLoading:!0,error:null}));const{error:c}=await b.auth.signInWithPassword({email:m,password:v});c&&o(f=>({...f,isLoading:!1,error:c.message}))},[]),q=t.useCallback(async(m,v,c,f="standard")=>{var E;o(C=>({...C,isLoading:!0,error:null}));const{data:y,error:S}=await b.auth.signUp({email:m,password:v,options:{data:{full_name:c}}});if(S){o(C=>({...C,isLoading:!1,error:S.message}));return}(E=y.user)!=null&&E.id&&await b.from("profiles").upsert({user_id:y.user.id,email:m,full_name:c,role:f})},[]),w=t.useCallback(async()=>{await b.auth.signOut()},[]),T=t.useCallback(()=>{o(m=>({...m,error:null}))},[]);return e.jsx(B.Provider,{value:{...u,signIn:i,signUp:q,signOut:w,clearError:T},children:n})}function H(){const n=t.useContext(B);if(!n)throw new Error("useAuth must be used within AuthProvider");return n}function V(n){if(!n.test_tag_next_due)return"No Tag";const u=new Date,o=new Date(n.test_tag_next_due),d=Math.ceil((o.getTime()-u.getTime())/(1e3*60*60*24));return d<0?"Expired":d<=n.tag_threshold_days?"Due Soon":"OK"}function D(n){if(n.current_status==="Maintenance")return"Maintenance";if(n.current_status==="In Use"){if(n.expected_return_date){const u=new Date;if(new Date(n.expected_return_date)<u)return"Overdue"}return"In Use"}return"Available"}function _e(n){switch(n){case"OK":return{bg:"bg-emerald-50",text:"text-emerald-700",border:"border-emerald-200"};case"Due Soon":return{bg:"bg-amber-50",text:"text-amber-700",border:"border-amber-200"};case"Expired":return{bg:"bg-red-50",text:"text-red-700",border:"border-red-200"};case"No Tag":return{bg:"bg-gray-50",text:"text-gray-500",border:"border-gray-200"}}}function ke(n){switch(n){case"Available":return{bg:"bg-emerald-50",text:"text-emerald-700",dot:"bg-emerald-500"};case"In Use":return{bg:"bg-blue-50",text:"text-blue-700",dot:"bg-blue-500"};case"Overdue":return{bg:"bg-red-50",text:"text-red-700",dot:"bg-red-500"};case"Maintenance":return{bg:"bg-orange-50",text:"text-orange-700",dot:"bg-orange-500"}}}const ye=["Power Tools","Survey Equipment","Compaction","Power Supply","Cutting Equipment","Fastening Tools","Demolition","Electrical Testing","Access Equipment","General","Safety Equipment","Hand Tools"],W=t.createContext(null);function I(n,u){const o=n.toLowerCase(),d=u.toLowerCase();if(o.includes(d))return!0;let l=0;for(let x=0;x<o.length&&l<d.length;x++)o[x]===d[l]&&l++;return l===d.length}function re({children:n}){const[u,o]=t.useState([]),[d,l]=t.useState([]),[x,g]=t.useState(!0),[k,p]=t.useState(null),[i,q]=t.useState(""),[w,T]=t.useState("All"),[m,v]=t.useState(null),c=t.useCallback(async()=>{g(!0),p(null);const s=new AbortController,r=setTimeout(()=>s.abort(),12e3);try{const[a,j]=await Promise.all([b.from("equipment").select("*").order("asset_id",{ascending:!0}).abortSignal(s.signal),b.from("movements").select("*").order("event_timestamp",{ascending:!1}).abortSignal(s.signal)]);if(clearTimeout(r),a.error)throw a.error;if(j.error)throw j.error;const U=(a.data||[]).map(P=>({...P,current_status:D(P)}));o(U),l(j.data||[])}catch(a){a.name==="AbortError"?p("Request timed out. Please try again."):p(a.message||"Failed to load data")}finally{g(!1)}},[]);t.useEffect(()=>{c()},[c]);const f=t.useMemo(()=>{const s={total:0,available:0,inUse:0,overdue:0,expiredTags:0,dueSoon:0};return u.forEach(r=>{s.total++;const a=D(r);a==="Available"&&s.available++,a==="In Use"&&s.inUse++,a==="Overdue"&&s.overdue++;const j=V(r);j==="Expired"&&s.expiredTags++,j==="Due Soon"&&s.dueSoon++}),s},[u]),y=t.useMemo(()=>{let s=u;switch(w){case"Available":s=s.filter(r=>D(r)==="Available");break;case"In Use":s=s.filter(r=>D(r)==="In Use");break;case"Overdue":s=s.filter(r=>D(r)==="Overdue");break;case"Expired Tags":s=s.filter(r=>V(r)==="Expired");break;case"Due Soon":s=s.filter(r=>V(r)==="Due Soon");break}return i.trim()&&(s=s.filter(r=>I(r.name,i)||I(r.asset_id,i)||I(r.category,i)||I(r.assigned_to||"",i)||I(r.assigned_site||"",i))),s},[u,w,i]),S=t.useMemo(()=>m&&u.find(s=>s.id===m)||null,[m,u]),E=t.useMemo(()=>m?d.filter(s=>s.equipment_id===m):[],[m,d]),C=t.useCallback(s=>{v(s)},[]),A=t.useCallback(async s=>{try{const{data:r,error:a}=await b.from("equipment").insert(s).select().single();if(a)throw a;return await c(),r}catch(r){return p(r.message),null}},[c]),L=t.useCallback(async(s,r)=>{try{const{error:a}=await b.from("equipment").update({...r,updated_at:new Date().toISOString()}).eq("id",s);if(a)throw a;return await c(),!0}catch(a){return p(a.message),!1}},[c]),O=t.useCallback(async s=>{try{const{error:r}=await b.from("movements").insert(s);if(r)throw r;const a={};if(s.event_type==="check_out"?(a.current_status="In Use",a.assigned_to=s.assigned_to||"",a.assigned_site=s.site||"",a.assigned_job=s.job_reference||"",a.expected_return_date=s.expected_return_date||null):s.event_type==="return"&&(a.current_status="Available",a.assigned_to="",a.assigned_site="",a.assigned_job="",a.expected_return_date=null),s.equipment_id){const{error:j}=await b.from("equipment").update({...a,updated_at:new Date().toISOString()}).eq("id",s.equipment_id);if(j)throw j}return await c(),!0}catch(r){return p(r.message),!1}},[c]),z=t.useCallback(async(s,r)=>{try{const{error:a}=await b.storage.from("equipment-photos").upload(r,s,{upsert:!0});if(a)throw a;const{data:j}=b.storage.from("equipment-photos").getPublicUrl(r);return j.publicUrl}catch(a){return p(a.message),null}},[]);return e.jsx(W.Provider,{value:{equipment:u,movements:d,isLoading:x,error:k,searchQuery:i,activeFilter:w,filteredEquipment:y,stats:f,selectedEquipment:S,selectedMovements:E,setSearchQuery:q,setActiveFilter:T,selectEquipment:C,refreshData:c,createEquipment:A,updateEquipment:L,createMovement:O,uploadPhoto:z},children:n})}function Q(){const n=t.useContext(W);if(!n)throw new Error("useEquipment must be used within EquipmentProvider");return n}function ne({onOpenAuth:n,currentView:u,onScanResult:o,onToggleSidebar:d}){var w;const{user:l,isAdmin:x,setDemoRole:g,signOut:k}=H(),[p,i]=t.useState(!1),q={dashboard:"Dashboard",equipment:"Equipment Registry",detail:"Equipment Detail"};return e.jsx("header",{className:"sticky top-0 z-20 bg-slate-900/70 backdrop-blur-xl ring-1 ring-white/10",children:e.jsxs("div",{className:"px-4 lg:px-6 h-16 flex items-center justify-between gap-4",children:[e.jsxs("div",{className:"flex items-center gap-3 min-w-0",children:[e.jsx("button",{type:"button","aria-label":"Open menu",onClick:()=>d==null?void 0:d(),className:"lg:hidden inline-flex items-center justify-center rounded-lg border border-slate-700 bg-slate-800 p-2 text-slate-300 hover:bg-slate-700 transition-colors",children:e.jsx("svg",{className:"h-5 w-5",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M4 6h16M4 12h16M4 18h16"})})}),e.jsx("h1",{className:"text-lg font-semibold text-slate-100 truncate",children:q[u]||"Dashboard"})]}),e.jsxs("div",{className:"flex items-center gap-2 flex-shrink-0",children:[e.jsx("button",{className:"hidden sm:inline-flex items-center gap-2 px-3 py-2 bg-amber-500 hover:bg-amber-600 text-black rounded-lg text-xs font-semibold transition-colors",children:"Scan QR"}),e.jsxs("div",{className:"hidden md:flex items-center bg-slate-800 rounded-lg p-0.5 border border-slate-700",children:[e.jsx("button",{onClick:()=>g("admin"),className:`px-2.5 py-1 rounded-md text-xs font-medium transition-all ${x?"bg-slate-700 text-white":"text-slate-400 hover:text-white"}`,children:"Admin"}),e.jsx("button",{onClick:()=>g("standard"),className:`px-2.5 py-1 rounded-md text-xs font-medium transition-all ${x?"text-slate-400 hover:text-white":"bg-slate-700 text-white"}`,children:"Standard"})]}),e.jsxs("div",{className:"relative",children:[e.jsxs("button",{onClick:()=>i(!p),className:"flex items-center gap-2 rounded-lg px-2 py-1.5 hover:bg-slate-800 transition-colors",children:[e.jsx("div",{className:"w-8 h-8 rounded-full bg-slate-700 flex items-center justify-center text-white text-sm font-semibold",children:((w=l==null?void 0:l.full_name)==null?void 0:w.charAt(0))||"U"}),e.jsx("span",{className:"hidden lg:block text-sm text-slate-300",children:(l==null?void 0:l.full_name)||"User"})]}),p&&e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"fixed inset-0 z-30",onClick:()=>i(!1)}),e.jsxs("div",{className:"absolute right-0 mt-2 w-56 bg-slate-800 border border-slate-700 rounded-xl shadow-xl z-40 overflow-hidden",children:[e.jsxs("div",{className:"px-4 py-3 border-b border-slate-700",children:[e.jsx("p",{className:"text-sm font-medium text-slate-100",children:l==null?void 0:l.full_name}),e.jsx("p",{className:"text-xs text-slate-400",children:l==null?void 0:l.email})]}),e.jsx("button",{onClick:()=>{n(),i(!1)},className:"w-full text-left px-4 py-2 text-sm text-slate-300 hover:bg-slate-700 transition-colors",children:"Account"}),e.jsx("button",{onClick:()=>{k(),i(!1)},className:"w-full text-left px-4 py-2 text-sm text-red-400 hover:bg-slate-700 transition-colors",children:"Sign Out"})]})]})]})]})]})})}function ae({currentView:n,onNavigate:u,collapsed:o,onToggle:d}){const{stats:l}=Q(),x="/long-line-tracker-v2/LLT-developer-logo.png",g=[{id:"dashboard",label:"Dashboard",icon:e.jsx("svg",{className:"w-5 h-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:1.5,children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M3.75 6A2.25 2.25 0 016 3.75h2.25A2.25 2.25 0 0110.5 6v2.25a2.25 2.25 0 01-2.25 2.25H6a2.25 2.25 0 01-2.25-2.25V6zM3.75 15.75A2.25 2.25 0 016 13.5h2.25a2.25 2.25 0 012.25 2.25V18a2.25 2.25 0 01-2.25 2.25H6A2.25 2.25 0 013.75 18v-2.25zM13.5 6a2.25 2.25 0 012.25-2.25H18A2.25 2.25 0 0120.25 6v2.25A2.25 2.25 0 0118 10.5h-2.25a2.25 2.25 0 01-2.25-2.25V6zM13.5 15.75a2.25 2.25 0 012.25-2.25H18a2.25 2.25 0 012.25 2.25V18A2.25 2.25 0 0118 20.25h-2.25A2.25 2.25 0 0113.5 18v-2.25z"})})},{id:"equipment",label:"Equipment",badge:l.total,icon:e.jsx("svg",{className:"w-5 h-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:1.5,children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M11.42 15.17l-5.384-3.19A2.625 2.625 0 015.25 9.75V6.375a2.625 2.625 0 012.786-2.619l5.384.319M11.42 15.17l5.384 3.19A2.625 2.625 0 0017.25 16.5V6.375a2.625 2.625 0 00-2.786-2.619l-5.384.319M11.42 15.17V20.25"})})}],k=[{label:"Overdue",count:l.overdue,color:"bg-red-500"},{label:"Expired Tags",count:l.expiredTags,color:"bg-red-400"},{label:"Due Soon",count:l.dueSoon,color:"bg-amber-500"}],p=i=>n===i||i==="equipment"&&n==="detail";return e.jsxs("aside",{className:`${o?"w-16":"w-64"} h-screen flex flex-col transition-[width] duration-300
        bg-slate-900/35 backdrop-blur-xl ring-1 ring-white/10`,children:[e.jsxs("div",{className:"h-16 flex items-center gap-3 px-4 border-b border-white/10",children:[e.jsx("img",{src:x,alt:"Long Line Tracker",className:"w-10 h-10 object-contain",draggable:!1}),!o&&e.jsxs("div",{className:"min-w-0",children:[e.jsx("div",{className:"text-white font-semibold leading-tight",children:"Long Line"}),e.jsx("div",{className:"text-[10px] text-slate-400 font-medium tracking-wider uppercase",children:"Tracker v2"})]})]}),e.jsx("nav",{className:"flex-1 px-2 py-4 space-y-1 overflow-y-auto",children:g.map(i=>e.jsxs("button",{onClick:()=>u(i.id),title:o?i.label:void 0,className:`w-full flex items-center gap-3 px-3 py-2.5 rounded-xl text-sm font-medium transition-colors ${p(i.id)?"bg-amber-500/15 text-amber-200 ring-1 ring-amber-400/15":"text-slate-300 hover:text-white hover:bg-white/5"}`,children:[e.jsx("span",{className:"shrink-0",children:i.icon}),!o&&e.jsxs(e.Fragment,{children:[e.jsx("span",{className:"flex-1 text-left truncate",children:i.label}),typeof i.badge=="number"&&e.jsx("span",{className:"bg-white/10 text-slate-200 text-xs px-2 py-0.5 rounded-full",children:i.badge})]})]},i.id))}),!o&&e.jsx("div",{className:"px-3 pb-4",children:e.jsxs("div",{className:"bg-white/5 rounded-xl p-3 ring-1 ring-white/10",children:[e.jsx("p",{className:"text-[10px] font-semibold text-slate-400 uppercase tracking-wider mb-2",children:"Alerts"}),e.jsx("div",{className:"space-y-2",children:k.map(i=>e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-xs text-slate-300",children:i.label}),e.jsx("span",{className:`${i.color} text-white text-xs font-bold px-1.5 py-0.5 rounded`,children:i.count})]},i.label))})]})}),e.jsx("button",{onClick:d,className:"h-12 flex items-center justify-center border-t border-white/10 text-slate-300 hover:text-white hover:bg-white/5 transition-colors",title:o?"Expand":"Collapse",children:e.jsx("svg",{className:`w-5 h-5 transition-transform ${o?"rotate-180":""}`,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:1.5,children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M18.75 19.5l-7.5-7.5 7.5-7.5m-6 15L5.25 12l7.5-7.5"})})})]})}function oe({message:n,type:u,onClose:o,duration:d=4e3}){t.useEffect(()=>{const g=setTimeout(o,d);return()=>clearTimeout(g)},[o,d]);const l={success:"bg-emerald-600",error:"bg-red-600",info:"bg-slate-800/70 backdrop-blur-md"},x={success:e.jsx("svg",{className:"w-5 h-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9 12.75L11.25 15 15 9.75M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})}),error:e.jsx("svg",{className:"w-5 h-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 9v3.75m9-.75a9 9 0 11-18 0 9 9 0 0118 0zm-9 3.75h.008v.008H12v-.008z"})}),info:e.jsx("svg",{className:"w-5 h-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M11.25 11.25l.041-.02a.75.75 0 011.063.852l-.708 2.836a.75.75 0 001.063.853l.041-.021M21 12a9 9 0 11-18 0 9 9 0 0118 0zm-9-3.75h.008v.008H12V8.25z"})})};return e.jsx("div",{className:"fixed top-4 right-4 z-[100] animate-slide-in",children:e.jsxs("div",{className:`${l[u]} text-white rounded-xl shadow-lg px-4 py-3 flex items-center gap-3 min-w-[300px]`,children:[x[u],e.jsx("p",{className:"text-sm font-medium flex-1",children:n}),e.jsx("button",{onClick:o,className:"p-1 hover:bg-white/10 rounded-lg transition-colors",children:e.jsx("svg",{className:"w-4 h-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6 18L18 6M6 6l12 12"})})})]})})}const $={shell:"text-white bg-gradient-to-b from-[#050A12] via-[#0B1626] to-[#071A2E]",card:"rounded-2xl bg-slate-800/50 backdrop-blur-md ring-1 ring-white/5 shadow-[0_12px_35px_rgba(0,0,0,0.35)]",cardHover:"transition-colors hover:bg-slate-800/60 hover:ring-white/10",cardPad:"p-4 md:p-6",divider:"border-white/10",input:"bg-slate-900/40 text-white placeholder:text-slate-500 border-white/10 focus-visible:ring-2 focus-visible:ring-amber-500/40 focus-visible:ring-offset-0"},le=t.lazy(()=>M(()=>import("./Dashboard-8aYGQXHt.js"),__vite__mapDeps([0,1,2,3]))),ie=t.lazy(()=>M(()=>import("./EquipmentList-CpKyzXJD.js"),__vite__mapDeps([4,1,2,5,3]))),ce=t.lazy(()=>M(()=>import("./EquipmentDetail-Cys9ppz3.js"),__vite__mapDeps([6,1,2,5,3]))),ue=t.lazy(()=>M(()=>import("./EquipmentForm-BSr_bSU5.js"),__vite__mapDeps([7,1,2,3]))),de=t.lazy(()=>M(()=>import("./MovementForm-CNlquLU1.js"),__vite__mapDeps([8,1,2,3]))),me=t.lazy(()=>M(()=>import("./ImportModal-DCupL-xj.js"),__vite__mapDeps([9,1,2,3]))),he=t.lazy(()=>M(()=>import("./AuthModal-xb6KgheJ.js"),__vite__mapDeps([10,1,2,3])));function xe(){const[n,u]=t.useState("dashboard"),[o,d]=t.useState(!1),[l,x]=t.useState(!1),[g,k]=t.useState(),[p,i]=t.useState(!1),[q,w]=t.useState(!1),[T,m]=t.useState(!1),[v,c]=t.useState(!1),[f,y]=t.useState(null),[S,E]=t.useState(null),{selectedEquipment:C,selectEquipment:A,refreshData:L,equipment:O}=Q(),{isAuthenticated:z,isLoading:s}=H(),r=t.useCallback((_,N="success")=>{E({message:_,type:N})},[]),a=t.useCallback((_,N)=>{u(_),k(N||void 0),x(!1)},[]),j=t.useCallback(_=>{A(_),u("detail"),x(!1)},[A]),U=t.useCallback(()=>{A(null),u("equipment")},[A]),P=t.useCallback(()=>{c(!1),w(!0)},[]),G=t.useCallback(()=>{c(!0),w(!0)},[]),K=t.useCallback(_=>{y(_)},[]),J=t.useCallback(()=>{w(!1),r(v?"Equipment updated successfully":"Equipment created successfully"),L()},[v,r,L]),X=t.useCallback(()=>{m(!1),r("Equipment imported successfully"),L()},[r,L]),Y=t.useCallback(()=>{y(null),r("Movement recorded successfully"),L()},[r,L]),Z=t.useCallback(_=>{const N=(_||"").trim();if(!N)return;const F=O.find(R=>R.qr_code&&R.qr_code.toLowerCase()===N.toLowerCase()||R.asset_id&&R.asset_id.toLowerCase()===N.toLowerCase());F?(A(F.id),u("detail"),r("Navigated to  ()","success"),x(!1)):r(`No equipment found for QR code: ${N}`,"error")},[O,A,r]);if(s)return e.jsx("div",{className:`min-h-screen flex items-center justify-center text-slate-300 ${$.shell}`,children:"Loadingâ€¦"});if(!z)return e.jsx("div",{className:`min-h-screen flex items-center justify-center ${$.shell}`,children:e.jsx(t.Suspense,{fallback:null,children:e.jsx(he,{onClose:()=>{}})})});const ee=e.jsx("div",{className:"text-slate-400",children:"Loading..."});return e.jsxs("div",{className:min-h-screen,children:[e.jsxs("div",{className:"hidden md:flex min-h-screen",children:[e.jsx(ae,{currentView:n,onNavigate:a,collapsed:o,onToggle:()=>d(_=>!_)}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx(ne,{onOpenAuth:()=>i(!0),currentView:n,onScanResult:Z,onToggleSidebar:()=>x(_=>!_)}),e.jsx("div",{className:"p-4 lg:p-6",children:e.jsxs(t.Suspense,{fallback:ee,children:[n==="dashboard"&&e.jsx(le,{onNavigate:a}),n==="equipment"&&e.jsx(ie,{onSelectEquipment:j,onCreateNew:P,onImport:()=>m(!0),initialFilter:g}),n==="detail"&&e.jsx(ce,{onBack:U,onEdit:G,onMovement:K})]})})]})]}),e.jsxs(t.Suspense,{fallback:null,children:[q&&e.jsx(ue,{equipment:v?C:null,onClose:()=>w(!1),onSuccess:J}),f&&C&&e.jsx(de,{type:f,equipment:C,onClose:()=>y(null),onSuccess:Y}),T&&e.jsx(me,{onClose:()=>m(!1),onSuccess:X})]}),S&&e.jsx(oe,{message:S.message,type:S.type,onClose:()=>E(null)})]})}function fe(){return e.jsx(se,{children:e.jsx(re,{children:e.jsx(xe,{})})})}const pe={sidebarOpen:!1,toggleSidebar:()=>{}},be=t.createContext(pe),ge=({children:n})=>{const[u,o]=t.useState(!1),d=()=>{o(l=>!l)};return e.jsx(be.Provider,{value:{sidebarOpen:u,toggleSidebar:d},children:n})},ve=()=>e.jsx(ge,{children:e.jsx(fe,{})}),Se=Object.freeze(Object.defineProperty({__proto__:null,default:ve},Symbol.toStringTag,{value:"Module"}));export{ye as C,Se as I,$ as U,H as a,D as b,V as c,_e as d,ke as g,Q as u};
